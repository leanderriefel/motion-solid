import { Accordion } from "~/components/layout-transitions/accordion";
import { TabIndicator } from "~/components/layout-transitions/tab-indicator";
import { ListItems } from "~/components/layout-transitions/list-items";
import { SharedElement } from "~/components/layout-transitions/shared-element";

# Layout Transitions

Layout animations smoothly animate size and position changes. Elements with `layout` or `layoutId` automatically snapshot before DOM updates and animate after.

## Quick Start

In Solid, signals update the DOM synchronously. Motion runs a pre-render snapshot when layout-affecting props or `layoutDependencies` change, then measures after the DOM update to drive layout animations.

## Layout Dependencies

Use `layoutDependencies` to opt into layout snapshots for reactive values that don't flow through props (resources, stores, external state). Pass an array of accessors.

```tsx
const [data] = createResource(fetcher);

<motion.div layout layoutDependencies={[data]}>
  {data()}
</motion.div>;
```

## Layout Props

### `layout`

Enable layout animation for this element. Animates both position and size when its box changes.

```tsx
<motion.div layout>...</motion.div>
```

### `layout="position"`

Only animate position (translation). Size changes happen instantly without scale. Use this to keep content crisp while parent resizes.

```tsx
<motion.div layout="position">Text stays the same size</motion.div>
```

### `layout="size"`

Only animate size (scale). Position changes happen instantly. Use this when you want smooth resizing without movement.

```tsx
<motion.div layout="size">...</motion.div>
```

### `layoutId="unique-id"`

Create a shared element that can move between different DOM positions. Elements with the same `layoutId` transition smoothly between each other.

```tsx
<motion.div layoutId="shared">...</motion.div>
```

## Notes

- Elements must opt into layout with `layout` or `layoutId`
- Layout measurements are scoped to the element and its layout-enabled descendants
- External changes (scroll, resize, fonts) won't animate unless a dependency triggers a snapshot
